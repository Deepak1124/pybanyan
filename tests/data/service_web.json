{
  "kind": "BanyanService",
  "apiVersion": "rbac.banyanops.com/v1",
  "type": "origin",
  "metadata": {
    "name": "*.staging.earnest.com",
    "description": "Earnest microservies in staging",
    "cluster": "uswest",
    "tags": {
      "template": "USER_WEB",
      "user_facing": "true",
      "protocol": "https",
      "domain": "*.staging.earnest.com",
      "port": "443",
      "service_app_type": "WEB"
    }
  },
  "spec": {
    "attributes": {
      "frontend_addresses": [
        {
          "cidr": "",
          "port": "443"
        }
      ],
      "host_tag_selector": [
        {
          "com.banyanops.hosttag.site_name": "aws.staging.kubernetes-vpc"
        }
      ],
      "tls_sni": [
        "*.staging.earnest.com"
      ]
    },
    "backend": {
      "target": {
        "name": "{{ .Name }}.staging.zerotrust",
        "port": "443",
        "tls": true,
        "tls_insecure": true,
        "client_certificate": false
      },
      "dns_overrides": {},
      "whitelist": []
    },
    "cert_settings": {
      "dns_names": [
        "*.staging.earnest.com"
      ],
      "custom_tls_cert": {
        "enabled": false,
        "cert_file": "",
        "key_file": ""
      }
    },
    "http_settings": {
      "enabled": true,
      "oidc_settings": {
        "enabled": true,
        "service_domain_name": "https://*.staging.earnest.com",
        "post_auth_redirect_path": "",
        "api_path": ""
      },
      "http_health_check": {
        "enabled": false,
        "method": "",
        "path": "",
        "user_agent": "",
        "from_address": [],
        "https": false
      },
      "exempted_paths": {
        "enabled": true,
        "patterns": [
          {
            "hosts": [
              {
                "origin_header": [
                  "https://www.staging.earnest.com:443",
                  "https://my.staging.earnest.com:443"
                ],
                "target": [
                  "*"
                ]
              }
            ],
            "methods": [
              "OPTIONS"
            ],
            "mandatory_headers": [
              "Access-Control-Request-Method",
              "Access-Control-Request-Headers"
            ],
            "paths": [
              "*"
            ]
          }
        ]
      }
    },
    "client_cidrs": []
  }
}